<%- include('../partials/header') %>
<div class="header bg-gradient-to-r from-blue-500 to-blue-600">
  <div id="header-container" class="container mx-auto">
    <p class="text-5xl text-white text-bottom inline-block"><strong> Agents </strong></p>
    <a href="/agent/create" class="inline-block ml-4">
      <div class="circle shadow-md bg-blue-700">
        <div>
          <i class="block fas fa-plus text-2xl"></i>
          <!-- <p class="block text-sm">Add Schedule</p> -->  
        </div>              
      </div>
    </a>
  </div>
</div>
<div class="container mx-auto">
  <div class="container py-5 mx-auto mb-5 grid grid-cols-12 gap-4">

    <div class="col-span-12">
      <div class="bg-white shadow p-4 flex rounded border border-gray-200">
        <span class="w-auto flex justify-end items-center text-gray-500 p-2">
          <i class="fas fa-search text-2xl"></i>
        </span>
        <input autocomplete="off" id="search" class="w-full rounded p-2 outline-none" type="text" placeholder="Search by Agent ID, Name, or TSYS/Trisource Code">
      </div>
    </div>
    <!-- <button class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded col-span-2"> Search</button> -->

  </div>

  <div class="container mx-auto">
    <div class="flex flex-col mt-5">
      <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
        <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
          <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
            <table class="table min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-100">
                <!-- <tr>
                    <td class="bg-white border-none" colspan="2"></td>
                    <td class="text-left text-xs leading-4 font-medium text-gray-600 uppercase tracking-wider" colspan="2">
                      <div class="py-2" style="margin-left: 20px;">
                        Agent Codes
                      </div> 
                    </td>
                  </tr> -->
                <tr>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    Agent Seq
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    Name
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    TSYS
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    Trisource
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    Reports to
                  </th>
                  <th
                    class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                    Status
                  </th>
                  <th class="px-6 py-3 bg-gray-50"></th>
                </tr>
              </thead>
              <tbody id="table" class="bg-white divide-y divide-gray-200">
                <% data.forEach(agent =>{%>
                <tr class="hover:bg-blue-100">
                  <!-- AGENT ID -->
                  <td class="px-6 py-4 whitespace-no-wrap">
                    <div class="text-sm leading-5 font-medium text-gray-900">
                      <%= agent.agent_id %>
                    </div>
                  </td>
                  <!-- FIRST -->
                  <td class="px-6 py-4 whitespace-no-wrap">
                    <a href='/agent/<%= agent.agent_id %>'
                      class="text-sm leading-5 font-medium text-gray-900"><%= agent.name %></a>
                  </td>
                  <!-- TSYS -->
                  <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500">
                    <%= agent.codes.TSYS %>
                  </td>
                  <!-- TRISOURCE -->
                  <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500">
                    <%= agent.codes.TriSource %>

                  </td>
                  <!-- REPORTS TO -->
                  <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500">
                    <%= agent.reports_to %>
                  </td>
                  <!-- STATUS -->
                  <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500">
                    <span
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                      <%= agent.active === true ? 'Active' : 'Inactive' %>
                    </span>
                  </td>
                  <td class="px-6 py-4 whitespace-no-wrap text-right text-sm leading-5 font-medium">
                    <a href="./editagent.html" class="text-indigo-600 hover:text-indigo-900">Edit</a>
                  </td>
                </tr>
                <% })%>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
  $("#search").on("keyup", function () {
    var value = $(this).val().toLowerCase();
    $("#table tr").filter(function () {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
  //Search Bar class=search
  //table class=table
  //tbody id=table
</script>
<%- include('../partials/footer') %>