<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/7d89c1ce52.js" crossorigin="anonymous"></script>
    <title>Document</title>
    
</head>
<body>

  <%- include('../partials/navbar') %>

  <!-- <div class="container mx-auto pt-5">
    <nav class="rounded font-sans w-full my-4">
      <ol class="list-reset flex text-grey-dark">
        <li>Search</li>
      </ol>
    </nav>
  </div> -->
  <div class="container mx-auto pt-5">
    
  <p class="text-3xl mb-3 mt-5">Commission Rates</p>
  <div class="container py-5 mx-auto mb-5 grid grid-cols-12 gap-4">
      
        <div class="col-span-10">
            <input class="appearance-none border-2 bg-gray-200 border-gray-200 rounded w-full h-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500" id="search" type="text">
        </div>
        <div class="relative col-span-2">
          <select class="block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-state">
            <option>All</option>
            <option>Active</option>
            <option>Inactive</option>
          </select>
          <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
          </div>
        </div>
       <!-- <button class="bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded col-span-2"> Search</button> -->
      
  </div>
   
  <div class="container mx-auto">
    <div class="flex flex-col mt-5">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
          <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
            <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
              <table class="table min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-100">
                  <tr>
                    <th class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Commission Code
                    </th>
                    <th class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Commission Name
                    </th>
                    <th class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Commission Translation
                    </th>
                    <th class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Platform
                    </th>
                    <th class="px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">
                      Status
                    </th>
                    <th class="px-6 py-3 bg-gray-50"></th>
                  </tr>
                </thead>
                <tbody id="table" class="bg-white divide-y divide-gray-200">
                  <% data.forEach(commission =>{%>
                  <a href='/commission/<%= commission.commission_code %>' ></a>
                  <tr class="hover:bg-blue-100">
                     <!-- COMMISSION CODE -->
                    <td class="px-6 py-4 whitespace-no-wrap">
                      <a href='/commission/<%= commission.commission_code %>' class="text-sm leading-5 font-medium text-gray-900"><%= commission.commission_code %></a>
                    </td> 
                    <!-- COMMISSION NAME-->
                    <td class="px-6 py-4 whitespace-no-wrap">  
                      <div class="text-sm leading-5 font-medium text-gray-900">
                        <%= commission.commission_name[0] + ", " +commission.commission_name[1] %>
                      </div>          
                    </td>
                    <!-- COMMISSION TRANSLATION-->
                    <td class="px-6 py-4 whitespace-no-wrap">  
                      <div class="text-sm leading-5 font-medium text-gray-900">
                        <%= commission.agents[0].name + ", " + commission.agents[1].name  %>
                      </div>          
                    </td>
                    <!-- PLATFORM-->
                    <td class="px-6 py-4 whitespace-no-wrap">  
                      <div class="text-sm leading-5 font-medium text-gray-900">
                        <%= commission.platform %>
                      </div>          
                    </td>
                    <!-- STATUS -->
                    <td class="px-6 py-4 whitespace-no-wrap text-sm leading-5 text-gray-500">
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                        <%= commission.active === true? 'Active' : 'Inactive' %>
                      </span>
                    </td>
                    <td class="px-6 py-4 whitespace-no-wrap text-right text-sm leading-5 font-medium">
                      <a href="./editagent.html" class="text-indigo-600 hover:text-indigo-900">Edit</a>
                    </td>
                  </tr>
                  <% })%>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
  $('#search').on('keyup', function() {
    var value = $(this).val();
    var patt = new RegExp(value, "i");
    var filter = $('select').val();

    $('#table').find('tr').each(function() {
      var $table = $(this);
      
      if (!($table.find('td').text().search(patt) >= 0)) {
        $table.not('.t_head').hide();
      }
      if (($table.find('td').text().search(patt) >= 0)) {
        $(this).show();
      }
      
    });
  
  });
</script>
</body>
</html>